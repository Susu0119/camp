<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.m4gi.mapper.admin.AdminReviewReportMapper">

    <!-- 전체 조회 -->
    <select id="findAll" resultType="com.m4gi.dto.admin.AdminReviewReportDTO">
        SELECT
        report_id AS reportId,
        review_id AS reviewId,
        CONCAT(provider_code, '_', provider_user_id) AS userId,
        report_reason AS reason,
        report_status AS status,
        created_at AS createdAt,
        processed_at AS processedAt
        FROM review_reports
    </select>

    <!-- 상태 변경 -->
    <update id="updateStatus">
        UPDATE review_reports
        SET report_status = #{status}, processed_at = NOW()
        WHERE report_id = #{reportId}
    </update>

</mapper>
